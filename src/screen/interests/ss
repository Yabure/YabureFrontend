/* eslint-disable react-native/no-inline-styles */
import React from 'react';
import {
  StyleSheet,
  Text,
  View,
  FlatList,
  ScrollView,
  TouchableOpacity,
  useWindowDimensions,
} from 'react-native';
import {useSelector, useDispatch} from 'react-redux';
import {interest} from '../../Redux/action/Interest';
import {Selector} from 'react-native-flatlist-selector';

import DeviceInfo from 'react-native-device-info';
import {windowHeight, windowWidth} from '../../utils/Dimension';

import SelectableFlatlist, {STATE} from 'react-native-selectable-flatlist';

const Item = ({item, onPress, backgroundColor, textColor}) => (
  <TouchableOpacity onPress={onPress} style={[styles.item, backgroundColor]}>
    <Text style={[styles.title, textColor]}>{item.field}</Text>
  </TouchableOpacity>
);

const Interest = () => {
  const interestData = useSelector(state => state.interest.interest);
  const [interestField, setInterestField] = React.useState();
  const windowWidth = useWindowDimensions().width;
  console.log(interestData);

  const dispatch = useDispatch();
  React.useEffect(() => {
    dispatch(interest());
  }, [dispatch, interest]);

  const rowItem = item => <Text style={{flexDirection: 'row'}}>{item.id}</Text>;

  const itemsSelected = selectedItem => {
    console.log(selectedItem);
  };
  const [selectedId, setSelectedId] = React.useState(null);

  const renderItem = ({item}) => {
    const backgroundColor = item.id === selectedId ? '#302675' : 'whitea';
    const color = item.id === selectedId ? 'white' : 'black';

    return (
      <Item
        item={item}
        onPress={() => setSelectedId(item.id)}
        backgroundColor={{backgroundColor}}
        textColor={{color}}
      />
    );
  };

  React.useEffect(() => {}, [interestData]);

  return (
    <View style={styles.container}>
      <View>
        <Text style={styles.text}>
          This helps us to find you more relevant content{' '}
        </Text>
      </View>
      <View style={styles.interestField}>
        {/* <FlatList
          columnWrapperStyle={{justifyContent: 'space-between'}}
          data={interestData}
          renderItem={renderItem}
          keyExtractor={item => item.id}
          extraData={selectedId}
          numColumns={2}
          horizontal={false}
        /> */}

        <View style={styles.container}>
          <SelectableFlatlist
            data={interestData}
            state={STATE.EDIT}
            numColumns={2}
            multiSelect={true}
            itemsSelected={selectedItem => {
              itemsSelected(selectedItem);
            }}
            initialSelectedIndex={[0]}
            cellItemComponent={(item, otherProps) => rowItem(item)}
          />
        </View>
      </View>
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    top: windowHeight / 14,
    width: windowWidth / 0.9,
  },
  text: {
    fontSize: 13,
    textAlign: 'center',
    top: 10,
  },
  interestField: {
    top: 50,
    alignItems: 'center', //
    justifyContent: 'center',
    position: 'absolute',
  },
  item: {
    // marginTop: 10,
    width: '38%',
    // left: 10,
    height: windowHeight / 17,
    backgroundColor: '#302675',
    // padding: 10,
    alignItems: 'center',
    justifyContent: 'center',
    borderRadius: 3,
    borderColor: '#C4C4C4',
    borderWidth: 1,
    padding: 2,
    marginVertical: 20,
    marginHorizontal: 16,
  },
  title: {
    textAlign: 'center',
  },
});

export default Interest;
